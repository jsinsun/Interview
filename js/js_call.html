<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- <script src="js_promise.js"></script> -->
  </head>
  <body>
    <div>
      apply:方法能劫持另外一个对象的方法，继承另外一个对象的属性.
      call、apply、bind 都是函数的方法，并且不支持箭头函数
    </div>
    <div>
      <img src="../assets/images/this.png" />
    </div>
  </body>
</html>
<script>
  //call
  function fun() {
    console.log(this.name);
  }

  let cat = {
    name: "jsin",
  };

  let dog = {
    name: "snoopdogg",
    sayname() {
      console.log("my name is " + this.name);
    },
    food(food) {
      console.log(`${this.name}喜欢吃${food}`);
    },
  };

  dog.food.apply(cat, ["火锅"]);
  //bind 返回一个函数
  let fn = dog.food.bind(cat, "火锅");

  // setTimeout(() => {
  //   dog.sayname();
  // }, 50);

  //
  // Function.prototype.newCall = function (obj) {
  //   var obj = obj || window; //判断对象是否空对象，如果是则指向window
  //   obj.p = this; //改变this的指向

  //   var newArguments = [];

  //   for (i = 1, i < arguments; i++; ) {
  //     newArguments.push("arguments[" + i + "]");
  //   }
  //   var result = eval("obj.p(" + newArguments + ")");

  //   obj.p();
  //   delete obj.p;
  //   return result;
  // };

  function toObj(str, res = {}) {
    let arr = JSON.parse(str);

    arr.forEach((element) => {
      const arr1 = element.split(" x ");

      res[arr1[0]] = arr1[1];
    });

    return res;
  }

  console.log(toObj('["ITEM0001 x 1", "ITEM0013 x 2", "ITEM0022 x 1"]'));
</script>

<style>
  .disable {
    pointer-events: none;
  }
</style>
